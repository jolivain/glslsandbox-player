#! /bin/bash

set -e
set -u

if [[ $# -lt 1 ]] ; then
    echo "Usage: $0 <cstructs> ..."
    exit 1
fi

# header 
echo '/* Automatically generated by '"$(basename "$0")"' on '"$(date)"' */'
echo
echo '#include <stddef.h>'
echo
echo '#include "glslsandbox-shaders.h"'
echo
echo 'unsigned int glslsandbox_shaders_count_g = '"$#"';'
echo
echo 'glslsandbox_shaders_t'
echo 'glslsandbox_shaders_g[] = {'

cat "$@"

# Footer
echo '  { 0, 0, NULL, NULL }'
echo '};'
